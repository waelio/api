<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Waelio API â€“ OpenAPI Docs</title>
    <link rel="icon" href="/icons/icon.svg" type="image/svg+xml" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/swagger-ui-dist@5.17.14/swagger-ui.css"
    />
    <style>
      :root {
        color-scheme: light dark;
        --bg: #f8fafc;
        --text: #0f172a;
        --muted: #475569;
        --panel: #ffffff;
        --panel-strong: #e2e8f0;
      }
      :root[data-theme="dark"] {
        --bg: #0b1220;
        --text: #e2e8f0;
        --muted: #cbd5e1;
        --panel: #0f172a;
        --panel-strong: #111827;
      }
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: var(--bg);
        color: var(--text);
        transition: background 200ms ease, color 200ms ease;
      }
      header {
        padding: 16px 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #fff;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
      }
      header h1 {
        font-size: 20px;
        margin: 0;
      }
      header a {
        color: #fff;
        text-decoration: none;
        padding: 8px 12px;
        border-radius: 6px;
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      #swagger-ui {
        background: var(--panel);
      }
      /* Subtle tweak for dark-ish background */
      .swagger-ui .topbar {
        display: none;
      }
      .swagger-ui .information-container.wrapper {
        background: var(--panel-strong);
      }
      .theme-toggle {
        padding: 8px 12px;
        font-size: 13px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.5);
        background: rgba(0, 0, 0, 0.15);
        color: #fff;
        cursor: pointer;
        transition: opacity 150ms ease;
      }
      .theme-toggle:hover {
        opacity: 0.9;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Waelio API â€“ Interactive Docs</h1>
      <div>
        <button
          id="theme-toggle"
          class="theme-toggle"
          aria-label="Toggle theme"
        >
          ðŸŒ— Toggle theme
        </button>
        <a href="/" aria-label="Back to home">Home</a>
        <a href="/api/_openapi" aria-label="OpenAPI JSON" target="_blank"
          >OpenAPI JSON</a
        >
      </div>
    </header>
    <div id="swagger-ui"></div>

    <script src="https://unpkg.com/swagger-ui-dist@5.17.14/swagger-ui-bundle.js"></script>
    <script>
      (function () {
        const root = document.documentElement;
        const btn = document.getElementById("theme-toggle");
        const prefersDark =
          window.matchMedia &&
          window.matchMedia("(prefers-color-scheme: dark)").matches;
        const stored = localStorage.getItem("theme");
        const initial = stored || (prefersDark ? "dark" : "light");

        const apply = (theme) => {
          root.setAttribute("data-theme", theme);
          localStorage.setItem("theme", theme);
          if (btn)
            btn.textContent =
              theme === "dark" ? "â˜€ï¸ Light mode" : "ðŸŒ™ Dark mode";
        };

        apply(initial);
        btn?.addEventListener("click", () => {
          const next =
            root.getAttribute("data-theme") === "dark" ? "light" : "dark";
          apply(next);
        });
      })();

      window.onload = () => {
        SwaggerUIBundle({
          url: "/api/_openapi",
          dom_id: "#swagger-ui",
          deepLinking: true,
          presets: [SwaggerUIBundle.presets.apis],
          layout: "BaseLayout",
        });
      };
    </script>
  </body>
</html>
